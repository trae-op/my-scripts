<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1,maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <title>Router</title>
  </head>
  <body>

  <main id="main" role="main">
    <h1>Router</h1> 

    <a class="back" href="/my-scripts/">Назад</a>
    
    <section class="demonstration">

    <a class="block-router" href="#/block/0">0</a>
    <a class="block-router" href="#/block/1">1</a>
    <a class="block-router" href="#/block/2">2</a>

    </section>

<pre class="javascript" style="font-family:monospace;">  <span style="color: #000066; font-weight: bold;">function</span> activeBlock<span style="color: #009900;">&#40;</span>index<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">var</span> element <span style="color: #339933;">=</span> document.<span style="color: #660066;">getElementsByClassName</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'block-router'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span>element<span style="color: #009900;">&#91;</span>index<span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span>
      <span style="color: #000066; font-weight: bold;">return</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000066; font-weight: bold;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">var</span> i <span style="color: #339933;">=</span> <span style="color: #CC0000;">0</span><span style="color: #339933;">;</span> i <span style="color: #339933;">&lt;</span> element.<span style="color: #660066;">length</span><span style="color: #339933;">;</span> i<span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span>
      element<span style="color: #009900;">&#91;</span>i<span style="color: #009900;">&#93;</span>.<span style="color: #660066;">classList</span>.<span style="color: #660066;">remove</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'active-router'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
      element<span style="color: #009900;">&#91;</span>index<span style="color: #009900;">&#93;</span>.<span style="color: #660066;">classList</span>.<span style="color: #660066;">add</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'active-router'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span>
&nbsp;
  _router.<span style="color: #660066;">Initialize</span><span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>object<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">return</span> <span style="color: #009900;">&#91;</span>
      <span style="color: #009900;">&#123;</span>
        <span style="color: #006600; font-style: italic;">// 'id' - ВСЁ ЧТО ПОСЛЕ 'block' С АДРЕСНОЙ СТРОКИ </span>
        adressURL<span style="color: #339933;">:</span> <span style="color: #3366CC;">'block:id'</span><span style="color: #339933;">,</span>
        callBack<span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
          activeBlock<span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
      <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
      <span style="color: #009900;">&#123;</span>
        <span style="color: #006600; font-style: italic;">// СОВПАДЕНИЕ С АДРЕСНОЙ СТРОКОЙ</span>
        adressURL<span style="color: #339933;">:</span> <span style="color: #3366CC;">'page2'</span><span style="color: #339933;">,</span>
        callBack<span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
          alert<span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
      <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
      <span style="color: #009900;">&#123;</span>
        adressURL<span style="color: #339933;">:</span> <span style="color: #3366CC;">''</span><span style="color: #339933;">,</span>
        callBack<span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
          window.<span style="color: #660066;">location</span>.<span style="color: #660066;">hash</span> <span style="color: #339933;">=</span> <span style="color: #3366CC;">'/block/0'</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
      <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
      <span style="color: #009900;">&#123;</span>
        <span style="color: #006600; font-style: italic;">// ЕСЛИ ИЗ ПРЕДЫДУЩИХ ВАРИАНТОВ НЕ СОВПАЛО</span>
        adressURL<span style="color: #339933;">:</span> <span style="color: #3366CC;">'*'</span><span style="color: #339933;">,</span>
        callBack<span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
          console.<span style="color: #660066;">warn</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'incorrect URL: &quot;'</span> <span style="color: #339933;">+</span> url <span style="color: #339933;">+</span> <span style="color: #3366CC;">'&quot;'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
      <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  _router.<span style="color: #660066;">Start</span><span style="color: #009900;">&#40;</span>_router.<span style="color: #660066;">AllData</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
  <span style="color: #006600; font-style: italic;">//---------------------------------------</span>
  <span style="color: #006600; font-style: italic;">//  API</span>
  <span style="color: #006600; font-style: italic;">// _router.ChangeUrl(' ВСЁ ПОСЛЕ &quot;#&quot; ');</span>
  <span style="color: #006600; font-style: italic;">//</span>
  <span style="color: #006600; font-style: italic;">//---------------------------------------</span></pre>

  </main>
    
  <script src="../../js/router.js"></script>
  
  <script id="script">
  function activeBlock(index) {
    var element = document.getElementsByClassName('block-router');
    
    if (!element[index])
      return;

    for (var i = 0; i < element.length; i++)
      element[i].classList.remove('active-router');

      element[index].classList.add('active-router');
  }

  _router.Initialize(function(object) {
    return [
      {
        // 'id' - ВСЁ ЧТО ПОСЛЕ 'block' С АДРЕСНОЙ СТРОКИ 
        adressURL: 'block:id',
        callBack: function(id) {
          activeBlock(id);
        }
      },
      {
        // СОВПАДЕНИЕ С АДРЕСНОЙ СТРОКОЙ
        adressURL: 'page2',
        callBack: function(url) {
          alert(url);
        }
      },
      {
        adressURL: '',
        callBack: function(url) {
          window.location.hash = '/block/0';
        }
      },
      {
        // ЕСЛИ ИЗ ПРЕДЫДУЩИХ ВАРИАНТОВ НЕ СОВПАЛО
        adressURL: '*',
        callBack: function(url) {
          console.warn('incorrect URL: "' + url + '"');
        }
      }
    ];
  });

  _router.Start(_router.AllData);

  //---------------------------------------
  //  API
  // _router.ChangeUrl(' ВСЁ ПОСЛЕ "#" ');
  //
  //---------------------------------------
  </script>

  </body>
</html>
