(function(d,w){w.MoveElement=function(data){var _this=this;_this.All_ME(data,function(object,index){object.MouseOffset={};_this.Data_ME.push(object);_this.Controls_ME(index);_this.Show(object)})};MoveElement.prototype.Data_ME=[];MoveElement.prototype.Show=function(object){var _this=this;if(object.showPosition)object.showPosition({x:_this.GetPosition(object.element).x-_this.GetPosition(object.container).x,y:_this.GetPosition(object.element).y-_this.GetPosition(object.container).y})};MoveElement.prototype.All_ME=function(array,callBack){if(array.forEach)array.forEach(callBack);else{for(var i=0;i<array.length;i++)callBack(array[i],i)}};MoveElement.prototype.FixEvent=function(e){e=e||w.event;if(e.pageX===null&&e.clientX!==null){var html=d.documentElement;var body=d.body;e.pageX=e.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);e.pageY=e.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0)}if(!e.which&&e.button){e.which=e.button&1?1:(e.button&2?3:(e.button&4?2:0))}return e};MoveElement.prototype.GetPosition=function(e){var left=0;var top=0;while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent}left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top}};Element.prototype.StyleValue_ME=function(value){var _this=this;if(w.getComputedStyle(_this)!==undefined)return parseInt(w.getComputedStyle(_this).getPropertyValue(value))};Element.prototype.Events_ME=function(value,callBack){var _this=this;if(_this.addEventListener)_this.addEventListener(value,callBack,false);else _this.attachEvent(value,callBack);return _this};MoveElement.prototype.CheckMobileDevice_ME=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|ZuneWP7/i.test(navigator.userAgent||navigator.vendor||w.opera)};Element.prototype.Position_ME=function(position,value){this.style[position]=value;return this};MoveElement.prototype.Controls_ME=function(index){var _this=this;var object=_this.Data_ME[index];var thisElement=object.element;var container=object.container;var heightElem=thisElement.StyleValue_ME('height');var widthElem=thisElement.StyleValue_ME('width');var widthContainer=container.StyleValue_ME('width');var heightContainer=container.StyleValue_ME('heught');var eventMD_TS='mousedown';var eventMM_TM='mousemove';var eventMU_TE='mouseup';var axis=function(event){event=_this.FixEvent(event);var leftResult;var topResult;var axis_x=event.pageX-_this.MouseOffset.x-_this.GetPosition(container).x;var axis_y=event.pageY-_this.MouseOffset.y-_this.GetPosition(container).y;if(object.positionAxis){if(object.positionAxis==='x')leftResult=axis_x;if(object.positionAxis==='y')topResult=axis_y}else{leftResult=axis_x;topResult=axis_y}return{left:leftResult,top:topResult}};var checkEvents=function(event){if(_this.CheckMobileDevice_ME())return event.changedTouches[0];else return event};var settings=function(checkOption,objSet){return{checkEvent:checkOption,x:objSet.x||_this.MouseOffset.x,y:objSet.y||_this.MouseOffset.y,heightElement:heightElem,widthElement:widthElem,element:objSet.thisElem||this,relativeContainer:objSet.cont||this,widthContainer:widthContainer,heightContainer:heightContainer}};if(_this.CheckMobileDevice_ME()){eventMD_TS='touchstart';eventMM_TM='touchmove';eventMU_TE='touchend'}thisElement.Events_ME(eventMD_TS,function(event){event=_this.FixEvent(event);var pos=_this.GetPosition(this);_this.MouseOffset={x:checkEvents(event).pageX-pos.x,y:checkEvents(event).pageY-pos.y};if(object.events)object.events(settings('start',{cont:container}))});container.Events_ME(eventMM_TM,function(event){if(!_this.MouseOffset)return;thisElement.Position_ME('left',(axis(checkEvents(event)).left)+'px').Position_ME('top',(axis(checkEvents(event)).top)+'px');if(object.events){object.events(settings('move',{x:axis(checkEvents(event)).left,y:axis(checkEvents(event)).top,thisElem:thisElement}))}}).Events_ME(eventMU_TE,function(event){if(object.events&&_this.MouseOffset)object.events(settings('stop',{x:axis(checkEvents(event)).left,y:axis(checkEvents(event)).top,thisElem:thisElement}));_this.MouseOffset=null})}})(document,window);